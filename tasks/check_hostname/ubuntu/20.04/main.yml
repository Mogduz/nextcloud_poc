# =============================================================================
# File Documentation (auto-inserted)
# Generated: 2025-09-26T23:01:52
# Path: tasks/check_hostname/ubuntu/20.04/main.yml
# Purpose: TBD
# Notes: This header was added automatically based on the comment schema.
# =============================================================================

# -----------------------------------------------------------------------------

# Task: assert hostname var is set

# Description: TBD

# When: n/a

# Tags: n/a

# Changed by: auto-commenter

# -----------------------------------------------------------------------------

- name: assert hostname var is set
  ansible.builtin.assert:
      that:
        - hostname is defined
        - (hostname | trim | length) > 0
      fail_msg: "BREAK: var 'hostname' is not defined or empty."
      success_msg: "hostname={{ hostname }} asseration passed"

# -----------------------------------------------------------------------------

# Task: gahter network facts

# Description: TBD

# When: n/a

# Tags: n/a

# Changed by: auto-commenter

# -----------------------------------------------------------------------------

- name: gahter network facts
  ansible.builtin.setup:
    gather_subset: [network]

# -----------------------------------------------------------------------------

# Task: Check if short name is identical (hostname can be FQDN)

# Description: TBD

# When: n/a

# Tags: n/a

# Changed by: auto-commenter

# -----------------------------------------------------------------------------

- name: Check if short name is identical (hostname can be FQDN)
  ansible.builtin.assert:
    that:
      - (hostname | default('') | trim | length) > 0
      - ((hostname | trim | lower).split('.')[0]) == (ansible_facts.hostname | lower)
    fail_msg: "Mismatch: runtime short='{{ ansible_facts.hostname }}', provided='{{ hostname }}'"
    success_msg: hostname match! success
